{"version":3,"file":"index.mjs","sources":["../lib/defaults.js","../lib/validate.js","../lib/recurse.js","../lib/flatten.js","../lib/flatten_object.js","../lib/factory.js","../lib/index.js"],"sourcesContent":["/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nvar FLOAT64_MAX = require( '@stdlib/constants-float64-max' );\n\n\n// MAIN //\n\nvar defaults = {\n\t'delimiter': '.',\n\t'depth': FLOAT64_MAX,\n\t'copy': false\n};\n\n\n// EXPORTS //\n\nmodule.exports = defaults;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nvar isObject = require( '@stdlib/assert-is-plain-object' );\nvar hasOwnProp = require( '@stdlib/assert-has-own-property' );\nvar isString = require( '@stdlib/assert-is-string' ).isPrimitive;\nvar isBoolean = require( '@stdlib/assert-is-boolean' ).isPrimitive;\nvar isNonNegativeInteger = require( '@stdlib/assert-is-nonnegative-integer' ).isPrimitive;\nvar format = require( '@stdlib/error-tools-fmtprodmsg' );\n\n\n// MAIN //\n\n/**\n* Validates function options.\n*\n* @private\n* @param {Object} opts - destination for function options\n* @param {Options} options - function options\n* @param {NonNegativeInteger} [options.depth] - depth to flatten\n* @param {boolean} [options.copy] - boolean indicating whether to deep copy\n* @param {boolean} [options.flattenArrays] - boolean indicating whether to flatten arrays\n* @param {string} [options.delimiter] - key path delimiter\n* @returns {(Error|null)} error or null\n*\n* @example\n* var opts = {};\n* var options = {\n*     'depth': 10,\n*     'copy': false,\n*     'delimiter': '|',\n*     'flattenArrays': false\n* };\n* var err = validate( opts, options );\n* if ( err ) {\n*     throw err;\n* }\n*/\nfunction validate( opts, options ) {\n\tif ( !isObject( options ) ) {\n\t\treturn new TypeError( format( '0jn2h', options ) );\n\t}\n\tif ( hasOwnProp( options, 'depth' ) ) {\n\t\topts.depth = options.depth;\n\t\tif ( !isNonNegativeInteger( opts.depth ) ) {\n\t\t\treturn new TypeError( format( '0jn35', 'depth', opts.depth ) );\n\t\t}\n\t}\n\tif ( hasOwnProp( options, 'copy' ) ) {\n\t\topts.copy = options.copy;\n\t\tif ( !isBoolean( opts.copy ) ) {\n\t\t\treturn new TypeError( format( '0jn30', 'copy', opts.copy ) );\n\t\t}\n\t}\n\tif ( hasOwnProp( options, 'flattenArrays' ) ) {\n\t\topts.flattenArrays = options.flattenArrays;\n\t\tif ( !isBoolean( opts.flattenArrays ) ) {\n\t\t\treturn new TypeError( format( '0jn30', 'flattenArrays', opts.flattenArrays ) );\n\t\t}\n\t}\n\tif ( hasOwnProp( options, 'delimiter' ) ) {\n\t\topts.delimiter = options.delimiter;\n\t\tif ( !isString( opts.delimiter ) ) {\n\t\t\treturn new TypeError( format( '0jn2i', 'delimiter', opts.delimiter ) );\n\t\t}\n\t}\n\treturn null;\n}\n\n\n// EXPORTS //\n\nmodule.exports = validate;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nvar objectKeys = require( '@stdlib/utils-keys' );\nvar isPlainObject = require( '@stdlib/assert-is-plain-object' );\nvar isArray = require( '@stdlib/assert-is-array' );\n\n\n// MAIN //\n\n/**\n* Recursively flattens an object.\n*\n* @private\n* @param {Object} out - output object\n* @param {ObjectLike} obj - input object\n* @param {string} prefix - key prefix\n* @param {NonNegativeInteger} depth - recursion depth\n* @param {Options} opts - options\n* @param {boolean} opts.flattenArrays - boolean indicating whether to flatten arrays\n* @param {string} opts.delimiter - key path delimiter\n* @returns {Object} output object\n*/\nfunction recurse( out, obj, prefix, depth, opts ) {\n\tvar keys;\n\tvar val;\n\tvar key;\n\tvar i;\n\tif ( prefix ) {\n\t\tprefix += opts.delimiter;\n\t}\n\tkeys = objectKeys( obj );\n\tfor ( i = 0; i < keys.length; i++ ) {\n\t\tval = obj[ keys[i] ];\n\t\tkey = prefix + keys[ i ];\n\t\tif ( depth ) {\n\t\t\tif (\n\t\t\t\t(isPlainObject( val ) && objectKeys( val ).length) ||\n\t\t\t\t(opts.flattenArrays && isArray( val ))\n\t\t\t) {\n\t\t\t\trecurse( out, val, key, depth-1, opts );\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\t\tout[ key ] = val;\n\t}\n\treturn out;\n}\n\n\n// EXPORTS //\n\nmodule.exports = recurse;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nvar copy = require( '@stdlib/utils-copy' );\nvar recurse = require( './recurse.js' );\n\n\n// MAIN //\n\n/**\n* Flattens an object.\n*\n* @private\n* @param {ObjectLike} obj - object to flatten\n* @param {Object} opts - options\n* @param {NonNegativeInteger} opts.depth - maximum depth to flatten\n* @param {boolean} opts.copy - boolean indicating whether to deep copy\n* @param {boolean} opts.flattenArrays - boolean indicating whether to flatten arrays\n* @param {string} opts.delimiter - key path delimiter\n* @returns {Object} flattened object\n*/\nfunction flatten( obj, opts ) {\n\tvar out;\n\tif ( opts.depth === 0 ) {\n\t\tout = obj;\n\t} else {\n\t\tout = recurse( {}, obj, '', opts.depth, opts );\n\t}\n\tif ( opts.copy ) {\n\t\treturn copy( out );\n\t}\n\treturn out;\n}\n\n\n// EXPORTS //\n\nmodule.exports = flatten;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nvar isObjectLike = require( '@stdlib/assert-is-object-like' );\nvar format = require( '@stdlib/error-tools-fmtprodmsg' );\nvar copy = require( '@stdlib/utils-copy' );\nvar defaults = require( './defaults.js' );\nvar validate = require( './validate.js' );\nvar flatten = require( './flatten.js' );\n\n\n// MAIN //\n\n/**\n* Flattens an object.\n*\n* @param {ObjectLike} obj - object to flatten\n* @param {Options} [options] - function options\n* @param {NonNegativeInteger} [options.depth] - maximum depth to flatten\n* @param {boolean} [options.copy=false] - boolean indicating whether to deep copy\n* @param {boolean} [options.flattenArrays=false] - boolean indicating whether to flatten arrays\n* @param {string} [options.delimiter='.'] - key path delimiter\n* @throws {TypeError} first argument must be object-like\n* @throws {TypeError} options argument must be an object\n* @throws {TypeError} must provide valid options\n* @returns {ObjectLike} flattened object\n*\n* @example\n* var obj = {'a':{'b':{'c':'d'}}};\n*\n* var out = flattenObject( obj );\n* // returns {'a.b.c':'d'}\n*/\nfunction flattenObject( obj, options ) {\n\tvar opts;\n\tvar err;\n\tif ( !isObjectLike( obj ) ) {\n\t\tthrow new TypeError( format( 'invalid argument. First argument must be an object (except null). Value: `%s`.', obj ) );\n\t}\n\topts = copy( defaults );\n\tif ( arguments.length > 1 ) {\n\t\terr = validate( opts, options );\n\t\tif ( err ) {\n\t\t\tthrow err;\n\t\t}\n\t}\n\treturn flatten( obj, opts );\n}\n\n\n// EXPORTS //\n\nmodule.exports = flattenObject;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nvar isObjectLike = require( '@stdlib/assert-is-object-like' );\nvar format = require( '@stdlib/error-tools-fmtprodmsg' );\nvar copy = require( '@stdlib/utils-copy' );\nvar defaults = require( './defaults.js' );\nvar validate = require( './validate.js' );\nvar flatten = require( './flatten.js' );\n\n\n// MAIN //\n\n/**\n* Returns a function to flatten an object.\n*\n* @param {Options} options - function options\n* @param {NonNegativeInteger} [options.depth] - maximum depth to flatten\n* @param {boolean} [options.copy=false] - boolean indicating whether to deep copy\n* @param {boolean} [options.flattenArrays=false] - boolean indicating whether to flatten arrays\n* @param {string} [options.delimiter='.'] - key path delimiter\n* @throws {TypeError} options argument must be an object\n* @throws {TypeError} must provide valid options\n* @returns {Function} flatten function\n*\n* @example\n* var flatten = factory({\n*     'copy': true,\n*     'delimiter': '|'\n* });\n*\n* var obj = {'a':{'b':{'c':'d'}}};\n* var out = flatten( obj );\n* // returns {'a|b|c':'d'}\n*/\nfunction factory( options ) {\n\tvar opts;\n\tvar err;\n\n\topts = copy( defaults );\n\terr = validate( opts, options );\n\tif ( err ) {\n\t\tthrow err;\n\t}\n\treturn flattenObject;\n\n\t/**\n\t* Flattens an object.\n\t*\n\t* @private\n\t* @param {ObjectLike} obj - object to flatten\n\t* @throws {TypeError} first argument must be object-like\n\t* @returns {Object} flattened object\n\t*/\n\tfunction flattenObject( obj ) {\n\t\tif ( !isObjectLike( obj ) ) {\n\t\t\tthrow new TypeError( format( 'invalid argument. Must provide an object (except null). Value: `%s`.', obj ) );\n\t\t}\n\t\treturn flatten( obj, opts );\n\t}\n}\n\n\n// EXPORTS //\n\nmodule.exports = factory;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n/**\n* Flatten an object.\n*\n* @module @stdlib/utils-flatten-object\n*\n* @example\n* var flattenObject = require( '@stdlib/utils-flatten-object' );\n*\n* var obj = {'a':{'b':{'c':'d'}}};\n*\n* var out = flattenObject( obj );\n* // returns {'a.b.c':'d'}\n*\n* @example\n* var flattenObject = require( '@stdlib/utils-flatten-object' );\n*\n* var flatten = flattenObject.factory({\n*     'depth': 2,\n*     'copy': true,\n*     'delimiter': '|'\n* });\n*\n* var obj = {'a':{'b':{'c':'d'}}};\n*\n* var out = flatten( obj );\n* // returns {'a|b':{'c':'d'}}\n*/\n\n// MODULES //\n\nvar setReadOnly = require( '@stdlib/utils-define-nonenumerable-read-only-property' );\nvar flattenObject = require( './flatten_object.js' );\nvar factory = require( './factory.js' );\n\n\n// MAIN //\n\nsetReadOnly( flattenObject, 'factory', factory );\n\n\n// EXPORTS //\n\nmodule.exports = flattenObject;\n"],"names":["defaults_1","delimiter","depth","require$$0","copy","isObject","hasOwnProp","require$$1","isString","require$$2","isPrimitive","isBoolean","require$$3","isNonNegativeInteger","require$$4","format","require$$5","validate_1","opts","options","TypeError","flattenArrays","objectKeys","isPlainObject","isArray","recurse_1","recurse","out","obj","prefix","keys","val","key","i","length","flatten_1","isObjectLike","defaults","validate","flatten","flattenObject","err","arguments","factory","lib"],"mappings":";;2iCAsBA,IAcAA,EATe,CACdC,UAAa,IACbC,MAPiBC,EAQjBC,MAAQ,GCRLC,EAAWF,EACXG,EAAaC,EACbC,EAAWC,EAAsCC,YACjDC,EAAYC,EAAuCF,YACnDG,EAAuBC,EAAmDJ,YAC1EK,EAASC,EAgEb,IAAAC,EAlCA,SAAmBC,EAAMC,GACxB,OAAMd,EAAUc,GAGXb,EAAYa,EAAS,WACzBD,EAAKhB,MAAQiB,EAAQjB,OACfW,EAAsBK,EAAKhB,QACzB,IAAIkB,UAAWL,EAAQ,QAAS,QAASG,EAAKhB,QAGlDI,EAAYa,EAAS,UACzBD,EAAKd,KAAOe,EAAQf,MACdO,EAAWO,EAAKd,OACd,IAAIgB,UAAWL,EAAQ,QAAS,OAAQG,EAAKd,OAGjDE,EAAYa,EAAS,mBACzBD,EAAKG,cAAgBF,EAAQE,eACvBV,EAAWO,EAAKG,gBACd,IAAID,UAAWL,EAAQ,QAAS,gBAAiBG,EAAKG,gBAG1Df,EAAYa,EAAS,eACzBD,EAAKjB,UAAYkB,EAAQlB,WACnBO,EAAUU,EAAKjB,YACb,IAAImB,UAAWL,EAAQ,QAAS,YAAaG,EAAKjB,YAGpD,KA1BC,IAAImB,UAAWL,EAAQ,QAASI,KCrCrCG,EAAanB,EACboB,EAAgBhB,EAChBiB,EAAUf,EA+Cd,IAAAgB,EA7BA,SAASC,EAASC,EAAKC,EAAKC,EAAQ3B,EAAOgB,GAC1C,IAAIY,EACAC,EACAC,EACAC,EAKJ,IAJKJ,IACJA,GAAUX,EAAKjB,WAEhB6B,EAAOR,EAAYM,GACbK,EAAI,EAAGA,EAAIH,EAAKI,OAAQD,IAC7BF,EAAMH,EAAKE,EAAKG,IAChBD,EAAMH,EAASC,EAAMG,GAChB/B,IAEFqB,EAAeQ,IAAST,EAAYS,GAAMG,QAC1ChB,EAAKG,eAAiBG,EAASO,IAEhCL,EAASC,EAAKI,EAAKC,EAAK9B,EAAM,EAAGgB,GAInCS,EAAKK,GAAQD,EAEd,OAAOJ,GC3CJvB,EAAOD,EACPuB,EAAUnB,EAiCd,IAAA4B,EAhBA,SAAkBP,EAAKV,GACtB,IAAIS,EAMJ,OAJCA,EADmB,IAAfT,EAAKhB,MACH0B,EAEAF,EAAS,GAAIE,EAAK,GAAIV,EAAKhB,MAAOgB,GAEpCA,EAAKd,KACFA,EAAMuB,GAEPA,GC5BJS,EAAejC,EACfY,EAASR,EACTH,EAAOK,EACP4B,EAAWzB,EACX0B,EAAWxB,EACXyB,EAAUvB,EA4Cd,ICjDIoB,EAAejC,EACfY,EAASR,EACTH,EAAOK,EACP4B,EAAWzB,EACX0B,EAAWxB,EACXyB,EAAUvB,EAyDd,ICjCAwB,EFCA,SAAwBZ,EAAKT,GAC5B,IAAID,EACAuB,EACJ,IAAML,EAAcR,GACnB,MAAM,IAAIR,UAAWL,EAAQ,iFAAkFa,IAGhH,GADAV,EAAOd,EAAMiC,GACRK,UAAUR,OAAS,IACvBO,EAAMH,EAAUpB,EAAMC,IAErB,MAAMsB,EAGR,OAAOF,EAASX,EAAKV,IEbtByB,EDEA,SAAkBxB,GACjB,IAAID,EACAuB,EAIJ,GAFAvB,EAAOd,EAAMiC,GACbI,EAAMH,EAAUpB,EAAMC,GAErB,MAAMsB,EAEP,OAUA,SAAwBb,GACvB,IAAMQ,EAAcR,GACnB,MAAM,IAAIR,UAAWL,EAAQ,uEAAwEa,IAEtG,OAAOW,EAASX,EAAKV,KC3BvBf,EAOAqC,EAAA,UAAAG,GAKA,IAAAC,EAAAJ"}